{"version":3,"file":"wm-google-map-2.js","sourceRoot":"","sources":["wm-google-map-2.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, css, LitElement } from 'lit';\nimport { customElement, property, query, state, queryAssignedNodes } from 'lit/decorators.js';\nimport { Loader } from '@googlemaps/js-api-loader';\n\n@customElement('wm-google-map')\nexport class WebmarketsGoogleMap extends LitElement {\n  static styles = css`\n    #map {\n      height: 100%;\n      width: 100%;\n    }\n  `;\n\n  @property({ type: String, reflect: true, attribute: 'api-key' })\n  apiKey = 'AIzaSyC0460_sJ5K4hOyvCHVr_BwgxNdBpaPoy0';\n  @property({ type: Number, reflect: true, attribute: 'lat' })\n  lat = 43.6554718;\n  @property({ type: Number, reflect: true, attribute: 'long' })\n  lng = -116.3537875;\n  @property({ type: Number, reflect: true, attribute: 'zoom' })\n  zoom = 14;\n  @property({type : Object, reflect: false, attribute: 'styles'})\n    styles: object = [{\"featureType\":\"administrative\",\"elementType\":\"geometry\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"administrative.land_parcel\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"poi\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"road\",\"elementType\":\"labels.icon\",\"stylers\":[{\"visibility\":\"on\"}]},{\"featureType\":\"road.local\",\"elementType\":\"labels\",\"stylers\":[{\"visibility\":\"on\"}]},{\"featureType\":\"transit\",\"stylers\":[{\"visibility\":\"off\"}]}];\n  @property({type: Boolean, reflect: true, attribute: 'show-marker'})\n  showMarker = false;\n  @property({type: Boolean, reflect: true, attribute: 'auto-open-marker'})\n  autoOpenMarker = false;\n  @property({type: String})\n  infoWindowContent =\n  '<div><p>Info Window</p></div>';\n\n\n  @state()\n  map?: google.maps.Map;\n  @state()\n  marker?: google.maps.Marker;\n  @state()\n  infoWindow?: google.maps.InfoWindow;\n  @state()\n  _allText = '';\n\n  @query('#map')\n  mapContainer!: HTMLElement;\n\n  @queryAssignedNodes()\n  _infoWindowContentNodes: any;\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._initMap();\n    window.addEventListener(\n      \"load\",\n      this.autoOpenMarker\n        ? () => this._autoOpenInfoWindow()\n        : () => console.log(\"Not auto\")\n    );\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    window.removeEventListener(\n      \"load\",\n      this.autoOpenMarker\n        ? () => this._autoOpenInfoWindow()\n        : () => console.log(\"Not auto\")\n    );\n  }\n  // TODO We need to figure out how to treat marker content as a slot\n  // https://lit.dev/docs/components/shadow-dom/#accessing-slotted-children\n\n  handleSlotchange(e: any) {\n    const childNodes = e.target.assignedNodes({flatten: true});\n    // ... do something with childNodes ...\n    this.infoWindowContent = Array.prototype.map.call(childNodes, (node) => {\n      return node.innerHTML ? node.innerHTML : ''\n    }).join('');\n  }\n\n  private _initMap() {\n    const loader = new Loader({\n      apiKey: this.apiKey,\n      version: 'weekly'\n    });\n\n    loader\n      .load()\n      .then(() => {\n        this.map = new google.maps.Map(this.mapContainer, {\n          center: { lat: this.lat, lng: this.lng },\n          zoom: this.zoom,\n          //@ts-ignore\n          styles: this.styles\n        });\n\n        if(this.showMarker){\n          this.marker = new google.maps.Marker({\n            position: { lat: this.lat, lng: this.lng },\n            map: this.map\n          });\n\n          this.marker?.addListener('click', () => {\n            this.infoWindow?.open({\n              anchor: this.marker,\n              map: this.map,\n              shouldFocus: false\n            });\n          });\n        }\n\n        this.infoWindow = new google.maps.InfoWindow({\n          content: this.infoWindowContent\n        });\n       \n      })\n      .catch(error => {\n        console.log(error);\n      });\n  }\n\n\n  _autoOpenInfoWindow() {\n    if (!this.infoWindow) return;\n\n    this.infoWindow.open(this.map, this.marker);\n    this.dispatchEvent(\n      new CustomEvent(\"google-map-marker-open\", { bubbles: true })\n    );\n  }\n\n  render() {\n    return html`\n      <div id=\"map\">\n        <slot @slotchange=${this.handleSlotchange}></slot>      \n      </div>\n    `;\n  }\n}\n"]}