{"version":3,"file":"selection.js","sourceRoot":"","sources":["selection.ts"],"names":[],"mappings":"AAAA,MAAM,OAAO,UAAU;IAKnB,YAAY,cAA2D;QACnE,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACpB,IAAI,CAAC,cAAc,GAAG,cAAc,CAAC;IACzC,CAAC;IAED,GAAG;QACC,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;IACnE,CAAC;IAED,KAAK,CAAC,QAAuB;QACzB,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;YAClC,IAAI,CAAC,QAAQ,IAAI,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC;gBACvC,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;QAC1C,CAAC,CAAC,CAAA;IACN,CAAC;IAED,UAAU,CAAC,IAAW;QAClB,OAAO,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC7C,CAAC;IAED,eAAe,CAAC,IAAW,EAAE,UAAmB;QAC5C,IAAI,IAAI,IAAI,IAAI,IAAI,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC;YACnD,OAAO;QAEX,IAAI,UAAU,EAAE;YACZ,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAC7B;aAAM;YACH,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACrC,IAAI,CAAC,IAAI,CAAC,EAAE;gBACR,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;aAC/B;SACJ;QAED,IAAI,IAAI,CAAC,cAAc,EAAE;YACrB,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;SACzC;IACL,CAAC;IAED,MAAM,CAAC,IAAW;QACd,IAAI,IAAI,CAAC,KAAK,EAAE;YACd,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;SACnB;aAAM,IAAI,IAAI,CAAC,GAAG,EAAE,KAAK,IAAI,EAAE;YAC9B,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,GAAG,EAAW,EAAE,KAAK,CAAC,CAAC;YACjD,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SAClC;IACL,CAAC;IAED,MAAM,CAAC,IAAW;QACd,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC;IACvD,CAAC;CACJ","sourcesContent":["export class XSelection<TItem> {\n    multi : boolean;\n    selection: Array<TItem>;\n    selectCallback: (item: TItem, isSelected: boolean) => void;\n\n    constructor(selectCallback?: (item: TItem, isSelected: boolean) => void) {\n        this.multi = false;\n        this.selection = [];\n        this.selectCallback = selectCallback;\n    }\n\n    get(): Array<TItem> | TItem {\n        return this.multi ? this.selection.slice() : this.selection[0];\n    }\n\n    clear(excludes?: Array<TItem>) {\n        this.selection.slice().forEach(item => {\n            if (!excludes || excludes.indexOf(item) < 0)\n                this.setItemSelected(item, false);\n        })\n    }\n\n    isSelected(item: TItem) : boolean {\n        return this.selection.indexOf(item) >= 0;\n    }\n\n    setItemSelected(item: TItem, isSelected: boolean) {\n        if (item == null || isSelected == this.isSelected(item))\n            return;\n\n        if (isSelected) {\n            this.selection.push(item);\n        } else {\n            var i = this.selection.indexOf(item);\n            if (i >= 0) {\n                this.selection.splice(i, 1);\n            }\n        }\n\n        if (this.selectCallback) {\n            this.selectCallback(item, isSelected);\n        }\n    }\n\n    select(item: TItem) {\n        if (this.multi) {\n          this.toggle(item);\n        } else if (this.get() !== item) {\n          this.setItemSelected(this.get() as TItem, false);\n          this.setItemSelected(item, true);\n        }\n    }\n\n    toggle(item: TItem) {\n        this.setItemSelected(item, !this.isSelected(item));\n    }\n}"]}